// Complete Spanish translations for Darth Vader's Political Choices website

// Main translations object
const translations = {
    en: {
        // Overview section
        'overview-title': 'Understanding Political Extremes, A Galaxy Far, Far Away...',
        'overview-text': 'Explores the edges of the political spectrum. On one side, we have the \'far-left,\' which pushes for big changes to make society more equal. On the other, the \'far-right\' wants to keep things traditional, often with a strong leader. Both want big changes, but they have very different ideas about what those changes should be. Think of Darth Vader – he shows us how power can be used in extreme ways, something we see more often on the far-right, even though both sides can have leaders who want total control. We\'ll keep it simple, no complicated terms, so everyone can understand.',
        
        // Left wing section
        'left-title': 'The Far-Left: Power to the People?',
        'left-p1': 'The far-left is all about making society truly equal. They believe that everyone should have the same opportunities and that no one group should have more power than another. This means breaking down the old ways of doing things, like how wealth and power are spread out.',
        'left-p2': 'They often push for things like everyone owning important resources together, instead of just a few rich people. They want to take wealth from the very rich and share it more fairly.',
        'left-p3': 'The far-left isn\'t afraid of big changes. They want to challenge old ideas about how society should work, especially when those ideas keep some people down.',
        'left-p4': 'Sometimes, they believe that the only way to make these changes is through big, even revolutionary, actions. They might think that the current system is so broken that it needs to be completely replaced.',
        
        // Right wing section
        'right-title': 'The Far-Right: Order and Authority?',
        'right-p1': 'The far-right focuses on the idea of a strong nation, sticking to old traditions, and keeping things orderly. They believe in the importance of national pride and often want to go back to a time when things were supposedly simpler and better.',
        'right-p2': 'They tend to favor a powerful central government and clear social ranks. They think that someone needs to be in charge to keep things stable and that everyone should know their place.',
        'right-p3': 'Often, they support policies that exclude people who are seen as different, like immigrants or minority groups. They might believe that these groups threaten the nation\'s identity or stability.',
        'right-p4': 'There\'s a risk that this focus on order and authority can lead to authoritarianism, where the government has too much power and silences anyone who disagrees. They might suppress protests or limit freedom of speech.',
        
        // Scenario texts
        'scenario1-desc': 'The Galactic Empire faces economic challenges. Darth Vader must decide how to allocate resources.',
        'scenario2-desc': 'A rebellion threatens the stability of the Empire. How should Darth Vader respond?',
        'scenario3-desc': 'The Empire is home to many different cultures and species. How should Darth Vader manage this diversity?',
        
        // Buttons
        'left-button': 'Left-Wing Policies',
        'right-button': 'Right-Wing Policies',
        'close-button': 'Close',
        
        // Popup responses
        'scenario1-left-title': '<span style="color: #ec4d58;">Left-Wing</span>',
        'scenario1-left-msg': 'Redistributing resources would help the outer rim planets, but the empire prioritizes military strength.',
        'scenario1-right-title': '<span style="color: #ec4d58;">Right-Wing</span>',
        'scenario1-right-msg': 'Focusing on the military and core worlds strengthens imperial power, but neglects the outer rim.',
        
        'scenario2-left-title': '<span style="color: #ec4d58;">Left-Wing</span>',
        'scenario2-left-msg': 'Dialogue could address the rebellion\'s root causes, but the Empire prefers force.',
        'scenario2-right-title': '<span style="color: #ec4d58;">Right-Wing</span>',
        'scenario2-right-msg': 'Crushing the rebellion enforces order, but can lead to more resentment.',
        
        'scenario3-left-title': '<span style="color: #ec4d58;">Left-Wing</span>',
        'scenario3-left-msg': 'Multiculturalism promotes equality, but the Empire favors a uniform culture.',
        'scenario3-right-title': '<span style="color: #ec4d58;">Right-Wing</span>',
        'scenario3-right-msg': 'Enforcing a uniform culture maintains control, but suppresses diversity.',
        
        // Presentation content
        'presentation-title': 'Understanding <span class="red-text">Political</span> <span class="red-text">Extremes</span>, A <span class="red-text">Galaxy</span> Far Away...'
    },
    es: {
        // Overview section
        'overview-title': 'Comprendiendo los Extremos Políticos, En una Galaxia Muy Lejana...',
        'overview-text': 'Explora los extremos del espectro político. Por un lado, tenemos la "extrema izquierda", que impulsa grandes cambios para hacer la sociedad más igualitaria. Por otro lado, la "extrema derecha" quiere mantener las tradiciones, a menudo con un líder fuerte. Ambos desean grandes cambios, pero tienen ideas muy diferentes sobre cómo deberían ser. Piensa en Darth Vader – nos muestra cómo el poder puede usarse de maneras extremas, algo que vemos más frecuentemente en la extrema derecha, aunque ambos lados pueden tener líderes que buscan control total. Lo mantendremos simple, sin términos complicados, para que todos puedan entender.',
        
        // Left wing section
        'left-title': 'La Extrema Izquierda: ¿Poder para el Pueblo?',
        'left-p1': 'La extrema izquierda se enfoca en hacer la sociedad verdaderamente igualitaria. Creen que todos deberían tener las mismas oportunidades y que ningún grupo debería tener más poder que otro. Esto significa desmantelar las viejas formas de hacer las cosas, como se distribuyen la riqueza y el poder.',
        'left-p2': 'A menudo impulsan ideas como la propiedad colectiva de recursos importantes, en lugar de que pertenezcan a unos pocos ricos. Quieren tomar riqueza de los muy ricos y compartirla más equitativamente.',
        'left-p3': 'La extrema izquierda no teme a los grandes cambios. Quieren desafiar viejas ideas sobre cómo debería funcionar la sociedad, especialmente cuando esas ideas mantienen a algunas personas oprimidas.',
        'left-p4': 'A veces, creen que la única manera de lograr estos cambios es a través de acciones grandes, incluso revolucionarias. Podrían pensar que el sistema actual está tan roto que necesita ser completamente reemplazado.',
        
        // Right wing section
        'right-title': 'La Extrema Derecha: ¿Orden y Autoridad?',
        'right-p1': 'La extrema derecha se enfoca en la idea de una nación fuerte, apegándose a las tradiciones antiguas y manteniendo el orden. Creen en la importancia del orgullo nacional y a menudo quieren volver a una época en que las cosas eran supuestamente más simples y mejores.',
        'right-p2': 'Tienden a favorecer un gobierno central poderoso y rangos sociales claros. Piensan que alguien necesita estar a cargo para mantener la estabilidad y que todos deben conocer su lugar.',
        'right-p3': 'A menudo, apoyan políticas que excluyen a personas consideradas diferentes, como inmigrantes o grupos minoritarios. Podrían creer que estos grupos amenazan la identidad o estabilidad de la nación.',
        'right-p4': 'Existe el riesgo de que este enfoque en el orden y la autoridad pueda conducir al autoritarismo, donde el gobierno tiene demasiado poder y silencia a cualquiera que esté en desacuerdo. Podrían suprimir protestas o limitar la libertad de expresión.',
        
        // Scenario texts
        'scenario1-desc': 'El Imperio Galáctico enfrenta desafíos económicos. Darth Vader debe decidir cómo asignar los recursos.',
        'scenario2-desc': 'Una rebelión amenaza la estabilidad del Imperio. ¿Cómo debería responder Darth Vader?',
        'scenario3-desc': 'El Imperio alberga muchas culturas y especies diferentes. ¿Cómo debería gestionar Darth Vader esta diversidad?',
        
        // Buttons
        'left-button': 'Políticas de Izquierda',
        'right-button': 'Políticas de Derecha',
        'close-button': 'Cerrar',
        
        // Popup responses
        'scenario1-left-title': '<span style="color: #ec4d58;">Politicas de Izquierda</span>',
        'scenario1-left-msg': 'Redistribuir recursos ayudaría a los planetas lejanos, pero el imperio prioriza la fuerza militar.',
        'scenario1-right-title': '<span style="color: #ec4d58;">Politicas de Derecha</span>',
        'scenario1-right-msg': 'Enfocarse en lo militar y los mundos centrales fortalece el poder imperial, pero se descuida la frontera.',
        
        'scenario2-left-title': '<span style="color: #ec4d58;">Politicas de Izquierda</span>',
        'scenario2-left-msg': 'El diálogo podría abordar las causas fundamentales de la rebelión, pero el Imperio prefiere la fuerza.',
        'scenario2-right-title': '<span style="color: #ec4d58;">Politicas de Derecha</span>',
        'scenario2-right-msg': 'Aplastar la rebelión impone orden, pero puede generar más resentimiento.',
        
        'scenario3-left-title': '<span style="color: #ec4d58;">Politicas de Izquierda</span>',
        'scenario3-left-msg': 'El multiculturalismo promueve la igualdad, pero el Imperio favorece una cultura uniforme.',
        'scenario3-right-title': '<span style="color: #ec4d58;">Politicas de Derecha</span>',
        'scenario3-right-msg': 'Imponer una cultura uniforme mantiene el control, pero suprime la diversidad.',
        
        // Presentation content
        'presentation-title': 'Comprendiendo <span class="red-text">Extremos</span> <span class="red-text">Políticos</span>, Una <span class="red-text">Galaxia</span> Muy Lejana...'
    }
};

// Function to apply translations based on the current language
function applyTranslations(lang) {
    // Find all elements with data-translate attribute and translate them
    const translatableElements = document.querySelectorAll('[data-translate]');
    translatableElements.forEach(element => {
        const translationKey = element.getAttribute('data-translate');
        if (translations[lang][translationKey]) {
            // If it's a button with a value attribute
            if (element.tagName === 'BUTTON' && element.value) {
                element.value = translations[lang][translationKey];
            } 
            // If it has innerHTML (most elements)
            else {
                element.innerHTML = translations[lang][translationKey];
            }
        }
    });
    
    // Also update any dynamic content that might be currently displayed
    updateDynamicContent(lang);
}

// Function to update popup content based on language
function updateDynamicContent(lang) {
    // Update any popup that might be currently shown
    const popupTitle = document.getElementById('popup-title');
    const popupMessage = document.getElementById('popup-message');
    const popupClose = document.getElementById('popup-close');
    
    if (popupTitle && popupMessage && popupClose) {
        // Set the close button text
        popupClose.textContent = translations[lang]['close-button'];
        
        // Try to determine which scenario and choice is currently active
        // This is a simplified approach - in a real app, you'd track state better
        
        // Get the currently displayed scenario
        const visibleScenario = document.querySelector('.scenario[style*="display: block"]');
        if (visibleScenario) {
            const scenarioId = visibleScenario.id;
            
            // Extract the scenario number (e.g., "scenario1" -> "1")
            const scenarioNum = scenarioId.replace('scenario', '');
            
            // Determine which choice was made based on the current popup content
            // This is a bit hacky but works for this use case
            const currentTitle = popupTitle.innerHTML;
            let choice = '';
            
            if (currentTitle.includes('Left-Wing') || currentTitle.includes('Izquierda')) {
                choice = 'left';
            } else if (currentTitle.includes('Right-Wing') || currentTitle.includes('Derecha')) {
                choice = 'right';
            }
            
            // If we identified both the scenario and choice, update the content
            if (scenarioNum && choice) {
                const titleKey = `scenario${scenarioNum}-${choice}-title`;
                const msgKey = `scenario${scenarioNum}-${choice}-msg`;
                
                // Update the title and message if translations exist
                if (translations[lang][titleKey]) {
                    popupTitle.innerHTML = translations[lang][titleKey];
                }
                
                if (translations[lang][msgKey]) {
                    popupMessage.innerHTML = translations[lang][msgKey];
                }
            }
        }
    }
}

// Update popup content when scenarios are clicked
function updateScenarioHandlers() {
    const leftButtons = document.querySelectorAll('.left-button');
    const rightButtons = document.querySelectorAll('.right-button');
    
    // Get the current language
    const currentLanguage = localStorage.getItem('preferredLanguage') || 'en';
    
    // Update handlers for left buttons
    leftButtons.forEach(button => {
        const originalClick = button.onclick;
        button.onclick = function(e) {
            // Call the original click handler if it exists
            if (originalClick) originalClick.call(this, e);
            
            // Get the scenario number from the button's data attribute
            const scenarioNum = button.getAttribute('data-scenario');
            
            // Update popup content based on the current language and scenario
            setTimeout(() => {
                const popup = document.getElementById('popup-title');
                const message = document.getElementById('popup-message');
                
                if (popup && message) {
                    popup.innerHTML = translations[currentLanguage][`scenario${scenarioNum}-left-title`];
                    message.innerHTML = translations[currentLanguage][`scenario${scenarioNum}-left-msg`];
                }
            }, 50);
        };
    });
    
    // Update handlers for right buttons
    rightButtons.forEach(button => {
        const originalClick = button.onclick;
        button.onclick = function(e) {
            // Call the original click handler if it exists
            if (originalClick) originalClick.call(this, e);
            
            // Get the scenario number from the button's data attribute
            const scenarioNum = button.getAttribute('data-scenario');
            
            // Update popup content based on the current language and scenario
            setTimeout(() => {
                const popup = document.getElementById('popup-title');
                const message = document.getElementById('popup-message');
                
                if (popup && message) {
                    popup.innerHTML = translations[currentLanguage][`scenario${scenarioNum}-right-title`];
                    message.innerHTML = translations[currentLanguage][`scenario${scenarioNum}-right-msg`];
                }
            }, 50);
        };
    });
}

// Function to initialize Spanish translations
function initializeSpanishTranslations() {
    // Set up event listener for language toggle button if it exists
    const languageToggleBtn = document.getElementById('language-toggle-btn');
    if (languageToggleBtn) {
        // Check if language handlers are already set up
        if (!languageToggleBtn.hasAttribute('data-translation-initialized')) {
            // Mark as initialized to prevent duplicate handlers
            languageToggleBtn.setAttribute('data-translation-initialized', 'true');
            
            // Initial translation based on stored preference
            const storedLanguage = localStorage.getItem('preferredLanguage') || 'en';
            applyTranslations(storedLanguage);
            
            // Set up handlers for scenario buttons
            updateScenarioHandlers();
        }
    }
}

// Run initialization when DOM is loaded
document.addEventListener('DOMContentLoaded', initializeSpanishTranslations);

// Export the translations for use in other scripts
window.siteTranslations = translations;

// Set up event listener for language toggle button
const languageToggleBtn = document.getElementById('language-toggle-btn');
if (languageToggleBtn) {
    languageToggleBtn.addEventListener('click', function() {
        // Get current language
        const currentLanguage = localStorage.getItem('preferredLanguage') || 'en';
        // Toggle to the other language
        const newLanguage = currentLanguage === 'en' ? 'es' : 'en';
        
        // Save new language preference
        localStorage.setItem('preferredLanguage', newLanguage);
        
        // Swap flag images active/inactive states
        const activeFlag = document.getElementById('language-flag');
        const inactiveFlag = document.getElementById('inactive-language-flag');
        
        // Apply animation
        activeFlag.classList.add('flag-change');
        inactiveFlag.classList.add('flag-change');
        
        // After animation, swap the flags
        setTimeout(() => {
            // Swap the src attributes
            const tempSrc = activeFlag.src;
            activeFlag.src = inactiveFlag.src;
            inactiveFlag.src = tempSrc;
            
            // Swap the alt attributes
            const tempAlt = activeFlag.alt;
            activeFlag.alt = inactiveFlag.alt;
            inactiveFlag.alt = tempAlt;
            
            // Remove animation classes
            activeFlag.classList.remove('flag-change');
            inactiveFlag.classList.remove('flag-change');
        }, 250);
        
        // Apply translations
        applyTranslations(newLanguage);
    });
}
